var Client=function(a){var b={};b.config={test:!1,debug:!1,endpoint_path:"http://api.digitwalk.com/gw/track"},b.token=a;var c=function(){return parseInt((new Date).getTime().toString().substring(0,10),10)};return b.send_request=function(a,c){var d=JSON.parse(JSON.stringify(a));b.config.test&&(d.test=1);var e=b.config.endpoint_path,f=function(a,b,c){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==this.readyState&&(200==this.status?b(this.responseText):c(this.statusText))},e.open("POST",a,!0),e.setRequestHeader("Access-Control-Allow-Headers","*"),e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Access-Control-Allow-Origin","*"),e.send(JSON.stringify(d))};f(e,function(a){if(void 0!==c){var b="1"!=a?new Error("Maihoo Server Error"):void 0;c(b)}},function(a){b.config.debug&&console.log("Got Error: "+a.message),void 0!==c&&c(a)})},b.track=function(a,d,e){d||(d={}),d.time=c();var f={event:a,projectToken:b.token,properties:d};b.userIdentifier&&(f.userIdentifier=b.userIdentifier),b.config.debug&&(console.log("Sending the following event to Maihoo:"),console.log(f)),b.send_request(f,e)},b.set_config=function(a){for(var c in a)a.hasOwnProperty(c)&&(b.config[c]=a[c])},b};